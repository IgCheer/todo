(()=>{"use strict";let e=document.querySelectorAll("section"),t=document.querySelectorAll("header nav a");const n=document.querySelector(".icon-menu-franchising"),s=document.querySelector(".menu-header-franchising__body");window.onscroll=()=>{e&&t&&n&&s&&e.forEach((e=>{let o=window.scrollY,a=e.offsetTop-document.querySelector("header").offsetHeight,c=e.offsetHeight,i=e.getAttribute("id");o>=a&&o<a+c?(t.forEach((e=>{e?.classList.remove("active"),document.querySelector(`header nav a[href*=${i}]`)?.classList.add("active")})),e.classList.add("show-animate")):e.classList.remove("show-animate"),n.classList.contains("menu-open")&&(document.body.classList.remove("_lock"),s.classList.remove("menu-open"),n.classList.remove("menu-open"))}))};let o=!1;setTimeout((()=>{if(o){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0);const a=document.querySelector("#formToDo"),c=document.querySelector("#taskInput"),i=document.querySelector("#tasksList");document.querySelector("#emptyList");let r=[];function d(){if(0===r.length){const e='\n        <li id="emptyList" class="card-tasks__item empty-list">\n            <img src="img/leaf.svg" alt="Empty" class="card-tasks__image">\n            <div class="card-tasks__name">Список дел пуст</div>\n        </li>\n        ';i.insertAdjacentHTML("afterbegin",e)}if(r.length>0){const e=document.querySelector("#emptyList");e&&e.remove()}}function l(e){const t=e.done?"item-card-task__name _done":"item-card-task__name",n=`\n        <li id="${e.id}" class="card-tasks__item item-card-task task-item">\n            <span class="${t}">${e.text}</span>\n            <div class="item-card-task__buttons">\n                <button type="button" data-action="done" class="item-card-task__button">\n                    <img src="img/tick.svg" alt="Done">\n                </button>\n                <button type="button" data-action="delete" class="item-card-task__button">\n                    <img src="img/cross.svg" alt="Done">\n                </button>\n            </div>\n        </li>\n    `;i.insertAdjacentHTML("beforeend",n)}function m(){localStorage.setItem("tasks",JSON.stringify(r))}localStorage.getItem("tasks")&&(r=JSON.parse(localStorage.getItem("tasks")),r.forEach((e=>{l(e)}))),d(),a.addEventListener("submit",(function(e){e.preventDefault();const t=c.value,n={id:Date.now(),text:t,done:!1};r.push(n),m(),l(n),c.value="",c.focus(),d()})),i.addEventListener("click",(function(e){if("delete"!==e.target.dataset.action)return;const t=e.target.closest(".card-tasks__item"),n=Number(t.id),s=r.findIndex((e=>e.id===n));r.splice(s,1),m(),t.remove(),d()})),i.addEventListener("click",(function(e){if("done"!==e.target.dataset.action)return;const t=e.target.closest(".card-tasks__item"),n=Number(t.id),s=r.find((e=>e.id===n));s.done=!s.done,m();t.querySelector(".item-card-task__name").classList.toggle("_done")})),window.FLS=!1,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}))})();